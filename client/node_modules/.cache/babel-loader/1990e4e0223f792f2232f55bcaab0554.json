{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/scs/OneDrive/Desktop/9 hours insa_allah/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/scs/OneDrive/Desktop/9 hours insa_allah/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/scs/OneDrive/Desktop/9 hours insa_allah/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{GlobalState}from\"../../../GlobaalState\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Categories(){var state=useContext(GlobalState);var _state$categoriesAPI$=_slicedToArray(state.categoriesAPI.categories,1),categories=_state$categoriesAPI$[0];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _state$token=_slicedToArray(state.token,1),token=_state$token[0];var _state$categoriesAPI$2=_slicedToArray(state.categoriesAPI.callback,2),callback=_state$categoriesAPI$2[0],setCallback=_state$categoriesAPI$2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onEdit=_useState4[0],setOnEdit=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setID=_useState6[1];var createCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res,_res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(!onEdit){_context.next=9;break;}_context.next=5;return axios.put(\"/api/category/\".concat(id),{name:category},{headers:{Authorization:token}});case 5:res=_context.sent;alert(res.data.msg);_context.next=13;break;case 9:_context.next=11;return axios.post(\"/api/category\",{name:category},{headers:{Authorization:token}});case 11:_res=_context.sent;alert(_res.data.msg);case 13:setOnEdit(false);setCategory(\"\");setCallback(!callback);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);alert(_context.t0.response.data.msg);case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function createCategory(_x){return _ref.apply(this,arguments);};}();var editCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,name){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setID(id);setCategory(name);setOnEdit(true);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function editCategory(_x2,_x3){return _ref2.apply(this,arguments);};}();var deleteCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/category/\".concat(id),{headers:{Authorization:token}});case 3:res=_context3.sent;alert(res.data.msg);setCallback(!callback);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0.response.data.msg);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function deleteCategory(_x4){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"categories\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:createCategory,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",value:category,required:true,onChange:function onChange(e){return setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:onEdit?\"Update\":\"Create\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:category.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return editCategory(category._id,category.name);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteCategory(category._id);},children:\"Delete\"})]})]},category._id);})})]});}export default Categories;","map":{"version":3,"names":["React","useState","useContext","GlobalState","axios","Categories","state","categoriesAPI","categories","category","setCategory","token","callback","setCallback","onEdit","setOnEdit","id","setID","createCategory","e","preventDefault","put","name","headers","Authorization","res","alert","data","msg","post","response","editCategory","deleteCategory","delete","target","value","map","_id"],"sources":["C:/Users/scs/OneDrive/Desktop/9 hours insa_allah/client/src/components/mainpages/categories/Categories.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { GlobalState } from \"../../../GlobaalState\";\r\nimport axios from \"axios\";\r\n\r\nfunction Categories() {\r\n  const state = useContext(GlobalState);\r\n  const [categories] = state.categoriesAPI.categories;\r\n  const [category, setCategory] = useState(\"\");\r\n  const [token] = state.token;\r\n  const [callback, setCallback] = state.categoriesAPI.callback;\r\n  const [onEdit, setOnEdit] = useState(false);\r\n  const [id, setID] = useState(\"\");\r\n\r\n  const createCategory = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (onEdit) {\r\n        const res = await axios.put(\r\n          `/api/category/${id}`,\r\n          { name: category },\r\n          {\r\n            headers: { Authorization: token },\r\n          }\r\n        );\r\n        alert(res.data.msg);\r\n      } else {\r\n        const res = await axios.post(\r\n          \"/api/category\",\r\n          { name: category },\r\n          {\r\n            headers: { Authorization: token },\r\n          }\r\n        );\r\n        alert(res.data.msg);\r\n      }\r\n      setOnEdit(false);\r\n      setCategory(\"\");\r\n      setCallback(!callback);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const editCategory = async (id, name) => {\r\n    setID(id);\r\n    setCategory(name);\r\n    setOnEdit(true);\r\n  };\r\n\r\n  const deleteCategory = async (id) => {\r\n    try {\r\n      const res = await axios.delete(`/api/category/${id}`, {\r\n        headers: { Authorization: token },\r\n      });\r\n      alert(res.data.msg);\r\n      setCallback(!callback);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"categories\">\r\n      <form onSubmit={createCategory}>\r\n        <label htmlFor=\"category\">Category</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"category\"\r\n          value={category}\r\n          required\r\n          onChange={(e) => setCategory(e.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\">{onEdit ? \"Update\" : \"Create\"}</button>\r\n      </form>\r\n\r\n      <div className=\"col\">\r\n        {categories.map((category) => (\r\n          <div className=\"row\" key={category._id}>\r\n            <p>{category.name}</p>\r\n            <div>\r\n              <button onClick={() => editCategory(category._id, category.name)}>\r\n                Edit\r\n              </button>\r\n              <button onClick={() => deleteCategory(category._id)}>Delete</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Categories;\r\n"],"mappings":"ubAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CACnD,OAASC,WAAW,KAAQ,uBAAuB,CACnD,MAAOC,MAAK,KAAM,OAAO,CAAC,wFAE1B,QAASC,WAAU,EAAG,CACpB,GAAMC,MAAK,CAAGJ,UAAU,CAACC,WAAW,CAAC,CACrC,yCAAqBG,KAAK,CAACC,aAAa,CAACC,UAAU,IAA5CA,UAAU,0BACjB,cAAgCP,QAAQ,CAAC,EAAE,CAAC,wCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,gCAAgBJ,KAAK,CAACK,KAAK,IAApBA,KAAK,iBACZ,0CAAgCL,KAAK,CAACC,aAAa,CAACK,QAAQ,IAArDA,QAAQ,2BAAEC,WAAW,2BAC5B,eAA4BZ,QAAQ,CAAC,KAAK,CAAC,yCAApCa,MAAM,eAAEC,SAAS,eACxB,eAAoBd,QAAQ,CAAC,EAAE,CAAC,yCAAzBe,EAAE,eAAEC,KAAK,eAEhB,GAAMC,eAAc,4FAAG,iBAAOC,CAAC,iIAC7BA,CAAC,CAACC,cAAc,EAAE,CAAC,oBAEbN,MAAM,+CACUV,MAAK,CAACiB,GAAG,yBACRL,EAAE,EACnB,CAAEM,IAAI,CAAEb,QAAS,CAAC,CAClB,CACEc,OAAO,CAAE,CAAEC,aAAa,CAAEb,KAAM,CAClC,CAAC,CACF,QANKc,GAAG,eAOTC,KAAK,CAACD,GAAG,CAACE,IAAI,CAACC,GAAG,CAAC,CAAC,qDAEFxB,MAAK,CAACyB,IAAI,CAC1B,eAAe,CACf,CAAEP,IAAI,CAAEb,QAAS,CAAC,CAClB,CACEc,OAAO,CAAE,CAAEC,aAAa,CAAEb,KAAM,CAClC,CAAC,CACF,SANKc,IAAG,eAOTC,KAAK,CAACD,IAAG,CAACE,IAAI,CAACC,GAAG,CAAC,CAAC,QAEtBb,SAAS,CAAC,KAAK,CAAC,CAChBL,WAAW,CAAC,EAAE,CAAC,CACfG,WAAW,CAAC,CAACD,QAAQ,CAAC,CAAC,iFAEvBc,KAAK,CAAC,YAAII,QAAQ,CAACH,IAAI,CAACC,GAAG,CAAC,CAAC,qEAEhC,kBA5BKV,eAAc,4CA4BnB,CAED,GAAMa,aAAY,6FAAG,kBAAOf,EAAE,CAAEM,IAAI,wHAClCL,KAAK,CAACD,EAAE,CAAC,CACTN,WAAW,CAACY,IAAI,CAAC,CACjBP,SAAS,CAAC,IAAI,CAAC,CAAC,wDACjB,kBAJKgB,aAAY,kDAIjB,CAED,GAAMC,eAAc,6FAAG,kBAAOhB,EAAE,wKAEVZ,MAAK,CAAC6B,MAAM,yBAAkBjB,EAAE,EAAI,CACpDO,OAAO,CAAE,CAAEC,aAAa,CAAEb,KAAM,CAClC,CAAC,CAAC,QAFIc,GAAG,gBAGTC,KAAK,CAACD,GAAG,CAACE,IAAI,CAACC,GAAG,CAAC,CACnBf,WAAW,CAAC,CAACD,QAAQ,CAAC,CAAC,mFAEvBc,KAAK,CAAC,aAAII,QAAQ,CAACH,IAAI,CAACC,GAAG,CAAC,CAAC,sEAEhC,kBAVKI,eAAc,8CAUnB,CAED,mBACE,aAAK,SAAS,CAAC,YAAY,wBACzB,cAAM,QAAQ,CAAEd,cAAe,wBAC7B,cAAO,OAAO,CAAC,UAAU,sBAAiB,cAC1C,cACE,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,UAAU,CACf,KAAK,CAAET,QAAS,CAChB,QAAQ,MACR,QAAQ,CAAE,kBAACU,CAAC,QAAKT,YAAW,CAACS,CAAC,CAACe,MAAM,CAACC,KAAK,CAAC,EAAC,EAC7C,cAEF,eAAQ,IAAI,CAAC,QAAQ,UAAErB,MAAM,CAAG,QAAQ,CAAG,QAAQ,EAAU,GACxD,cAEP,YAAK,SAAS,CAAC,KAAK,UACjBN,UAAU,CAAC4B,GAAG,CAAC,SAAC3B,QAAQ,qBACvB,aAAK,SAAS,CAAC,KAAK,wBAClB,mBAAIA,QAAQ,CAACa,IAAI,EAAK,cACtB,oCACE,eAAQ,OAAO,CAAE,yBAAMS,aAAY,CAACtB,QAAQ,CAAC4B,GAAG,CAAE5B,QAAQ,CAACa,IAAI,CAAC,EAAC,kBAExD,cACT,eAAQ,OAAO,CAAE,yBAAMU,eAAc,CAACvB,QAAQ,CAAC4B,GAAG,CAAC,EAAC,oBAAgB,GAChE,GAPkB5B,QAAQ,CAAC4B,GAAG,CAQhC,EACP,CAAC,EACE,GACF,CAEV,CAEA,cAAehC,WAAU"},"metadata":{},"sourceType":"module"}